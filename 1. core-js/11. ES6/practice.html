<!DOCTYPE html>
<html lang="ko">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Document</title>
</head>

<body>

  <script>
const traders = [
  {
    trader: {
      name: "김철수",
      city: "대전",
    },
    year: 2023,
    value: 500000,
  },
  {
    trader: {
      name: "박영희",
      city: "서울",
    },
    year: 2022,
    value: 600000,
  },
  {
    trader: {
      name: "김철수",
      city: "대전",
    },
    year: 2022,
    value: 1200000,
  },
  {
    trader: {
      name: "박영희",
      city: "서울",
    },
    year: 2023,
    value: 650000,
  },
  {
    trader: {
      name: "뽀로로",
      city: "부산",
    },
    year: 2023,
    value: 800000,
  },
  {
    trader: {
      name: "루피",
      city: "대전",
    },
    year: 2022,
    value: 780000,
  },
];

  // 연습 1: 2022년에 발생한 모든 거래를 찾아
  //   거래자 정보(이름, 도시)를 배열에 매핑해주세요

  // 연습 2: 거래자가 근무하는 모든 도시이름을 배열에 담아주세요.

  // 연습 3: 대전에 근무하는
  // 모든 거래자를 찾아 거래자정보(이름, 도시)를 배열에 매핑해주세요.

  // 연습 4: 모든 거래자의 이름을 배열에 모아주세요.

  // 연습 5: 서울에 사는 거래자의 모든 거래액의 총합 출력.
  

  const arr1 = traders
    .filter(tr => tr.year === 2022)
    .map(tr => tr.trader);
  
  console.log(arr1);
  
  console.log('===========================');

  const arr2 = traders
    .map(tr => tr.trader.city)
  console.log(arr2);

  console.log('===========================');
  const arr3 = traders
    .filter(tr => tr.trader.city === '대전')
    .map(tr => tr.trader)

  console.log(arr3);

  console.log('===========================');
  const arr4 = traders
    .map(tr => tr.trader.name);

  const names = new Set(arr4); // 중복 제거
  console.log(names);

  console.log('===========================');
  /*
  let total = 0;

  const arr5 = traders
    .filter(tr => tr.trader.city === '서울')
    .forEach(tr => total += tr.value);

  */

  // reduce 함수 : 배열을 반복해서 각 요소에 콜백함수를 적용한 결과를 누적하는 함수
  /*
    array.reduce((누적값 accelorator, 배열 요소 current value) => 반복해서 실행할 내용(누적연산), acc의 초기값);
  */

  const total = traders
    .filter(trs => trs.trader.city === '서울')
    .reduce((acc, curr) => acc + curr.value, 0);

  console.log('거래 총액: ' + total + '원');


    

  </script>

</body>

</html>